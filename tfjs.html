<html>
  <head> </head>

  <body>
	<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.1.2/dist/tf.min.js"></script>
	<script>
	(async () => {

		const modelUrl = 'w2l_plus_large_mp.tfjs/model.json';
		const model = await tf.loadLayersModel(modelUrl);
		
		const input = tf.zeros([1, 1000, 64], 'float32');
		const scores = model.predict(input).squeeze(0);
		const decoded_greedy = scores.argMax(axis = 1).arraySync();

		const decoded_text = decoded_greedy.map(c => ({0 : ' ', 27 : "'", 28 : '|'})[c] || String.fromCharCode(c - 1 + 'a'.charCodeAt()));
		const postproc_text = decoded_text.filter((c, i) => i == 0 || c != decoded_text[i - 1]).join('').replace(/\|/g, '');
		console.log('postproc text','<', postproc_text, '>')

	})();
	</script>
  </body>
</html>
